module.exports=function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s=35)}([function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,n,o={env:"production",port:process.env.PORT||8e3,API_URL:"https://whispering-cove-12630.herokuapp.com",MONGO_URI:"mongodb+srv://feelfunny:feelfunny123@cluster0-ekrsc.mongodb.net/test?retryWrites=true&w=majority",COOKIEKEY:"mycookiesecret",DB:{DEFAULT_COUNT:0,DEFAULT_CONTENT_TYPE:1,DEFAULT_TRUE:!0,DEFAULT_FALSE:!1,DEFAULT_ACCOUNT_TYPE:0,GENDER:{MALE:1,FEMALE:2,OTHER:3},BADGETS:{NOOBIE:1,PRO:2},CRAWLED_TYPE:{DEFAULT:0,FB:1,GAG:2}},S3:{BUCKET:"stylemycv",URL:"https://stylemycv.s3.ap-south-1.amazonaws.com",ACCESS:"AKIA3YIPQLXVUZ3S3UD7",SECRET:"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",PASSWORD:"WMwQ}t%c(XqR"},LOGIN_KEYS:{GOOGLE:{CLIENT:"38122336055-7stkqff3vae90il94e1p12tp0pq26a4h.apps.googleusercontent.com",SECRET:"Czvtwg5Is_ZZwdVPEwUAoR8c"}},MESSAGES:{100:"post has beeb added successfully",101:"section has been added successfully"},ERRORS:{100:"something went wrong, please try to post again"},JWT_SECRET:"himanshu@1234",ACCESS_TOKEN:"0z6v8b4uua"};t.a=o,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/config/index.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}).call(this,r(2)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=require("passport")},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({user_id:{type:o.a.Schema.ObjectId,ref:"users"},url:{type:String},poster_url:{type:String},slug:{type:String},title:{type:String},liked:{type:Boolean,default:u.DEFAULT_FALSE},like_count:{type:Number,default:u.DEFAULT_COUNT},comment_count:{type:Number,default:u.DEFAULT_COUNT},share_count:{type:Number,default:u.DEFAULT_COUNT},download_count:{type:Number,default:u.DEFAULT_COUNT},tags:[{type:String}],section:{type:o.a.Schema.ObjectId,ref:"sections"},content_type:{type:Number,default:u.DEFAULT_CONTENT_TYPE},mime_type:{type:String},ext:{type:String},is_new:{type:Boolean,default:u.DEFAULT_TRUE},is_hide:{type:Boolean,default:u.DEFAULT_FALSE},is_nsfw:{type:Boolean,default:u.DEFAULT_FALSE},width:{type:Number},height:{type:Number},duration:{type:Number,default:u.DEFAULT_COUNT},size:{type:Number},liker_list:[{type:o.a.Schema.ObjectId,ref:"users"}],is_active:{type:Boolean,default:u.DEFAULT_TRUE},crawled:{type:Boolean,default:u.DEFAULT_FALSE},crawled_source:{type:String},crawled_source_url:{type:String},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),d=o.a.model("posts",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/posts.model.js"),i.register(l,"Posts","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/posts.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/posts.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){r(38);var a,n=r(16),o=r.n(n),s=(r(10),r(13),r(4)),i=r(7),c=r(19),u=r(0),l=r.n(u),d=r(1),p=r(14),f=r.n(p),m=r(15),v=r.n(m),g=r(17),b=r.n(g),y=r(31),h=r.n(y),_=r(24),L=r.n(_);function x(e,t,r,a,n,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function s(e){x(o,a,n,s,i,"next",e)}function i(e){x(o,a,n,s,i,"throw",e)}s(void 0)}))}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var j,k,G,H,S,D,U,E,O,T,R=r(39),A=r(40),C=r(41),I=(r(42),r(43),r(44),new v.a.S3({accessKeyId:d.a.S3.ACCESS,secretAccessKey:d.a.S3.SECRET,region:"ap-south-1"})),$=function(){var e=w(regeneratorRuntime.mark((function e(t,r){var a,n,s,i,c,u,l,p,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("s3-upload"),e.prev=1,a=null,null,null,n=null,s=["jpg","jpeg","png","webp","gif"],!r){e.next=9;break}a=Buffer.from(r.replace(/^data:image\/\w+;base64,/,""),"base64"),n=req.body.ext,e.next=15;break;case 9:return e.next=11,o()({url:t,encoding:null});case 11:a=e.sent,i=new Buffer(a),n=t.split(".").pop(),"data:image/".concat(n,";base64,")+i.toString("base64");case 15:return c=f()(),n=s.indexOf(n)<0?"jpg":n,L.a.writeFileSync("result_image/".concat(c,".").concat(n),a),e.next=20,R(["result_image/".concat(c,".{jpg,png,webp,gif}")],{use:[A(),C()]});case 20:return u=e.sent,a=u[0].data,L.a.unlinkSync("result_image/".concat(c,".").concat(n)),l=a,p="image/".concat(n),m="uploads/".concat(b()().format("DD-MM-YYYY"),"/").concat(c,".").concat(n),v={Bucket:d.a.S3.BUCKET,Key:m,Body:l,ContentType:p},e.next=29,I.putObject(v).promise();case 29:return e.sent,console.log({url:"https://".concat(d.a.S3.BUCKET,".s3.ap-south-1.amazonaws.com/").concat(m),key:m,slug:c,mime:p,ext:n}),e.abrupt("return",{s3_url:"https://".concat(d.a.S3.BUCKET,".s3.ap-south-1.amazonaws.com/").concat(m),slug_id:c,mime:p,ext:n});case 34:e.prev=34,e.t0=e.catch(1),console.log(e.t0);case 37:case"end":return e.stop()}}),e,null,[[1,34]])})));return function(t,r){return e.apply(this,arguments)}}(),M={storeAllCrawledUrls:(E=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s,u,d,p,f,m,v,g,b,y,h,_,L,x,w,j;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.body),a=t.body.next_cursor?t.body.next_cursor.trim():null,n=t.body,o=n.source_urls,s=n.source_name,u=n.crawled_source,d=n.current_url,p=n.selected_section,f=o.reverse(),m=[],v=!0,g=!1,b=void 0,e.prev=9,y=f[Symbol.iterator]();case 11:if(v=(h=y.next()).done){e.next=31;break}return _=h.value,e.next=15,i.a.findOne({url:_.src.trim()});case 15:if(L=e.sent,x=_.title,L){e.next=28;break}return e.next=20,$(_.src.trim());case 20:return w=e.sent,j=_.src.trim(),1===u&&(j=d),m.push({url:j,title:x,s3_url:w.s3_url,slug_id:w.slug_id,mime_type:w.mime,ext:w.ext,crawled_source:u,source:s.toLowerCase().trim(),next_cursor:a,section:l.a.Types.ObjectId(p)}),console.log("crawled_source"),console.log(u),e.next=28,c.a.findOneAndUpdate({source:s.toLowerCase().trim()},{next_cursor:a,url:j,crawled_source:u},{upsert:!0});case 28:v=!0,e.next=11;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(9),g=!0,b=e.t0;case 37:e.prev=37,e.prev=38,v||null==y.return||y.return();case 40:if(e.prev=40,!g){e.next=43;break}throw b;case 43:return e.finish(40);case 44:return e.finish(37);case 45:console.log(m),m=m.reverse(),i.a.insertMany(m,(function(e,t){console.log(t),r.send({data:t})}));case 48:case"end":return e.stop()}}),e,null,[[9,33,37,45],[38,,40,44]])}))),function(e,t){return E.apply(this,arguments)}),listCrawledPages:(U=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.aggregate([{$group:{_id:"$source",yesCount:{$sum:{$cond:["$post_uploaded",1,0]}},noCount:{$sum:{$cond:["$post_uploaded",0,1]}},totalCount:{$sum:1}}}]);case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return U.apply(this,arguments)}),listUploadedPosts:(D=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.updateMany({},{post_uploaded:!1});case 2:return e.next=4,s.a.deleteMany({});case 4:a=e.sent,r.send({result:a});case 6:case"end":return e.stop()}}),e)}))),function(e,t){return D.apply(this,arguments)}),uploadPost:(S=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,c,u,l,p,f,m,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={$match:{}},t.query&&t.query.page&&(n=JSON.parse(t.query.page),a=n.indexOf("all")>=0?a:{$match:{source:{$in:n}}}),e.next=4,i.a.aggregate([a,{$group:{_id:"$source",count:{$sum:1},section:{$first:"$section"}}}]);case 4:return o=e.sent,c=o[(b=0,y=o.length-1,Math.floor(Math.random()*(y-b+1)+b))],u=c._id,l=c.section,e.next=8,i.a.findOne({source:u.trim(),post_uploaded:!1});case 8:if(p=e.sent){e.next=11;break}return e.abrupt("return",r.status(200).send({data:[]}));case 11:return e.next=14,i.a.findOneAndUpdate({_id:p._id,source:u.trim(),post_uploaded:!1},{post_uploaded:!0},{new:!0});case 14:return f=e.sent,e.next=17,s.a.findOne({crawled_source_url:f.url.trim(),crawled:!0});case 17:if(!e.sent){e.next=22;break}return console.log("alredy exits post"),console.log(f.url.trim()),e.abrupt("return",r.status(200).send({data:[]}));case 22:return m={user_id:t.user?t.user._id:"5e7ea43f9cf4640b79d58e6c",url:f.s3_url.trim(),slugId:f.slug_id.trim(),title:f.title,crawled:!0,crawled_source:f._id,crawled_source_url:f.url.trim(),section:l,mime_type:f.mime_type.trim(),ext:f.ext.trim()},f.mime_type.indexOf("video")>=0&&(m.content_type=2),v=new s.a(m),e.prev=25,e.next=28,v.save();case 28:return g=e.sent,e.abrupt("return",r.status(200).send({data:g}));case 33:return e.prev=33,e.t0=e.catch(25),e.abrupt("return",r.status(400).send({error:d.a.ERRORS[100]}));case 36:case"end":return e.stop()}var b,y}),e,null,[[25,33]])}))),function(e,t){return S.apply(this,arguments)}),getLatestCursor:(H=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.find({}).sort({created:-1});case 3:return a=e.sent,e.abrupt("return",r.status(200).send({data:a}));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r.status(400).send({error:e.t0}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return H.apply(this,arguments)}),latestCursor:(G=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body,n=a.crawled_source,o=a.section_name,o=n>1?"9gag_".concat(o):o,e.prev=2,e.next=5,c.a.findOne({crawled_source:n,source:o.trim()}).sort({created:-1});case 5:return s=e.sent,e.abrupt("return",r.status(200).send({data:s}));case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",r.status(400).send({error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e,t){return G.apply(this,arguments)}),nineGagCrawledUrls:(k=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s,i,c,u,l,d,p,f,m,v,g,b,y,_,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body,n=a.section_name,o=a.next_cursor,s=a.selected_section,i=o?"".concat(n,"?").concat(o):n,c="https://9gag.com/v1/group-posts/group/".concat(i),e.next=6,h()(c);case 6:return u=e.sent,e.next=9,u.json();case 9:l=e.sent,d=l.data,p=d.posts,f=d.nextCursor,m=[],v=!0,g=!1,b=void 0,e.prev=16,y=p[Symbol.iterator]();case 18:if(v=(_=y.next()).done){e.next=28;break}if("Photo"!=(L=_.value).type){e.next=24;break}m.push({title:L.title,src:L.images.image460.url}),e.next=25;break;case 24:return e.abrupt("continue",25);case 25:v=!0,e.next=18;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(16),g=!0,b=e.t0;case 34:e.prev=34,e.prev=35,v||null==y.return||y.return();case 37:if(e.prev=37,!g){e.next=40;break}throw b;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return e.abrupt("return",r.status(200).send({source_name:"9gag_".concat(n.trim()),source_urls:m,crawled_source:2,next_cursor:f,selected_section:s}));case 43:case"end":return e.stop()}}),e,null,[[16,30,34,42],[35,,37,41]])}))),function(e,t){return k.apply(this,arguments)}),compressImages:(j=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$("http://www.personal.psu.edu/crd5112/photos/GIF%20Example.gif");case 2:a=e.sent,r.send({data:a});case 4:case"end":return e.stop()}}),e)}))),function(e,t){return j.apply(this,arguments)})};t.a=M,(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(O.register(I,"s3","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/controllers/crawlers.controller.js"),O.register($,"uploadToS3","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/controllers/crawlers.controller.js"),O.register(M,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/controllers/crawlers.controller.js")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(10),o=r(18),s=r(13),i=r(4),c=r(29),u=r(11),l=r(23),d=r(0),p=r.n(d),f=r(1),m=r(14),v=r.n(m),g=r(15),b=r.n(g),y=r(16),h=r.n(y),_=r(17),L=r.n(_);function x(e,t,r,a,n,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function s(e){x(o,a,n,s,i,"next",e)}function i(e){x(o,a,n,s,i,"throw",e)}s(void 0)}))}}(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var j,k,G,H,S,D,U,E,O,T,R,A,C,I,$,M,B,q=new b.a.S3({accessKeyId:f.a.S3.ACCESS,secretAccessKey:f.a.S3.SECRET,region:"ap-south-1"}),P={listSections:($=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.a.find({});case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:f.a.ERRORS[100]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return $.apply(this,arguments)}),listTags:(I=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.find({});case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:f.a.ERRORS[100]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return I.apply(this,arguments)}),listUniversalUploads:(C=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.a.find({}).sort({created:-1});case 3:return a=e.sent,e.abrupt("return",r.status(200).send({data:a}));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r.status(400).send({error:f.a.ERRORS[100]}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return C.apply(this,arguments)}),uploadImagetoS3:(A=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,i,c,u,l,d,p,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("s3-upload"),e.prev=1,a=null,n=null,o=null,i=["jpg","jpeg","png","webp","gif"],t.body.url||!t.body.data64){e.next=9;break}a=Buffer.from(t.body.data64.replace(/^data:image\/\w+;base64,/,""),"base64"),o=t.body.ext,e.next=17;break;case 9:return e.next=11,h()({url:t.body.url,encoding:null});case 11:a=e.sent,c=new Buffer(a),o=t.body.url.split(".").pop(),n="data:image/".concat(o,";base64,")+c.toString("base64"),console.log("ext"),console.log(o);case 17:return o=i.indexOf(o)<0?"jpg":o,u=v()(),l=a,d="image/".concat(o),p="uploads/".concat(L()().format("DD-MM-YYYY"),"/").concat(u,".").concat(o),m={Bucket:f.a.S3.BUCKET,Key:p,Body:l,ContentType:d},e.next=25,q.putObject(m).promise();case 25:return e.sent,console.log({url:"https://".concat(f.a.S3.BUCKET,".s3.ap-south-1.amazonaws.com/").concat(p),key:p,slug:u,base64:n,mime:d,ext:o}),g=new s.a({url:"https://".concat(f.a.S3.BUCKET,".s3.ap-south-1.amazonaws.com/").concat(p),key:p,slug:u,mime:d,ext:o}),e.next=30,g.save();case 30:return e.abrupt("return",r.status(200).send({url:"https://".concat(f.a.S3.BUCKET,".s3.ap-south-1.amazonaws.com/").concat(p),key:p,slug:u,base64:n,mime:d,ext:o}));case 33:return e.prev=33,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",r.status(400).send({error:e.t0}));case 37:case"end":return e.stop()}}),e,null,[[1,33]])}))),function(e,t){return A.apply(this,arguments)}),uploadPost:(R=w(regeneratorRuntime.mark((function e(t,r){var a,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={user_id:t.user?t.user._id:"5e12110169481b125b9d0cb6",url:t.body.uploadedURL.trim(),slugId:t.body.postSlug.trim(),title:t.body.postTitle.trim(),section:t.body.postSections,mime_type:t.body.postMime.trim(),ext:t.body.postExt.trim()},t.body.postMime.indexOf("video")>=0&&(a.content_type=2),n=new i.a(a),e.prev=3,e.next=6,n.save();case 6:return o=e.sent,console.log(o),e.abrupt("return",r.status(200).send({data:f.a.MESSAGES[100]}));case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",r.status(400).send({error:f.a.ERRORS[100]}));case 15:case"end":return e.stop()}}),e,null,[[3,11]])}))),function(e,t){return R.apply(this,arguments)}),listPosts:(T=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={is_active:!0},e.prev=1,n=parseInt(t.query.offset)||0,o=parseInt(t.query.limit)||2,console.log(t.query),e.next=6,i.a.aggregate([{$match:a},{$lookup:{from:"sections",localField:"section",foreignField:"_id",as:"section_details"}},{$unwind:"$section_details"},{$lookup:{from:"liked_posts",let:{liked_post:"$_id"},pipeline:[{$match:{$expr:{$eq:["$post_id","$$liked_post"]},user_id:p.a.Types.ObjectId(t.user._id),is_active:!0}}],as:"liked"}},{$project:{like_count:1,comment_count:1,share_count:1,download_count:1,user_id:1,url:1,title:1,section:1,mime_type:1,ext:1,created:1,liked:{$size:"$liked"},"section_details._id":1,"section_details.value":1,"section_details.url":1}},{$sort:{created:-1}}]).skip(n).limit(o);case 6:s=e.sent,r.status(200).send({data:s}),console.log(s),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),r.status(400).send({error:f.a.ERRORS[100]});case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),function(e,t){return T.apply(this,arguments)}),postLiked:(O=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.user),a=t.body.post_id.trim(),n=!0===t.body.flag?1:-1,console.log(n),e.prev=4,o=n>0,e.next=8,c.a.findOneAndUpdate({user_id:p.a.Types.ObjectId(t.user._id),post_id:p.a.Types.ObjectId(a)},{is_active:o},{upsert:!0});case 8:return e.next=10,i.a.findOneAndUpdate({_id:a},{$inc:{like_count:n}},{new:!0});case 10:s=e.sent,r.status(200).send({data:s}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.status(400).send({error:e.t0});case 17:case"end":return e.stop()}}),e,null,[[4,14]])}))),function(e,t){return O.apply(this,arguments)}),queryTest:(E=w(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.updateMany({},{liked:!1,like_count:0,comment_count:0,share_count:0});case 3:a=e.sent,r.status(200).send({data:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.status(400).send({error:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),function(e,t){return E.apply(this,arguments)}),postComments:(U=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.post_id.trim(),n=t.body.text.trim(),o=new u.a({user_id:t.user._id,post_id:a,text:n}),e.prev=2,e.next=5,o.save();case 5:return e.sent,e.next=8,i.a.findOneAndUpdate({_id:a},{$inc:{comment_count:1}},{new:!0});case 8:s=e.sent,r.status(200).send({data:s}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.status(400).send({error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[2,12]])}))),function(e,t){return U.apply(this,arguments)}),listComments:(D=w(regeneratorRuntime.mark((function e(t,r){var a,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.post_id,n=p.a.Types.ObjectId(t.user._id),e.prev=2,e.next=5,u.a.aggregate([{$match:{post_id:p.a.Types.ObjectId(a),is_active:!0}},{$lookup:{from:"users",localField:"user_id",foreignField:"_id",as:"user_details"}},{$unwind:"$user_details"},{$lookup:{from:"liked_comments",let:{liked_comment:"$_id"},pipeline:[{$match:{$expr:{$eq:["$comment_id","$$liked_comment"]},post_id:p.a.Types.ObjectId(a),user_id:p.a.Types.ObjectId(t.user._id),is_active:!0}}],as:"liked"}},{$project:(s={points:1,created:1,liked:{$size:"$liked"},user_id:1,post_id:1,text:1,"user_details._id":1,"user_details.name":1,"user_details.profile_pic":1},i="user_details._id",c=1,i in s?Object.defineProperty(s,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[i]=c,s)},{$set:{current_user:{$eq:["$user_id",n]}}},{$sort:{created:-1}}]);case 5:o=e.sent,console.log(o),r.status(200).send({data:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),r.status(400).send({error:e.t0});case 13:case"end":return e.stop()}var s,i,c}),e,null,[[2,10]])}))),function(e,t){return D.apply(this,arguments)}),upvoteComments:(S=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body.comment_id,n=t.body.post_id,o=!0===t.body.flag?1:-1,e.prev=3,s=o>0,e.next=7,l.a.findOneAndUpdate({user_id:p.a.Types.ObjectId(t.user._id),comment_id:p.a.Types.ObjectId(a),post_id:p.a.Types.ObjectId(n)},{is_active:s},{upsert:!0});case 7:return e.next=9,u.a.findOneAndUpdate({_id:p.a.Types.ObjectId(a)},{$inc:{points:o}},{new:!0});case 9:i=e.sent,r.status(200).send({data:i}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r.status(400).send({error:e.t0});case 16:case"end":return e.stop()}}),e,null,[[3,13]])}))),function(e,t){return S.apply(this,arguments)}),deleteComment:(H=w(regeneratorRuntime.mark((function e(t,r){var a,n,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.body,n=a.comment_id,o=a.post_id,e.prev=1,e.next=4,u.a.findOneAndUpdate({_id:p.a.Types.ObjectId(n),user_id:p.a.Types.ObjectId(t.user._id),post_id:p.a.Types.ObjectId(o)},{is_active:!1});case 4:return s=e.sent,e.next=7,l.a.findOneAndUpdate({user_id:p.a.Types.ObjectId(t.user._id),comment_id:p.a.Types.ObjectId(n),post_id:p.a.Types.ObjectId(o)},{is_active:!1});case 7:r.status(200).send({data:s}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r.status(400).send({error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[1,10]])}))),function(e,t){return H.apply(this,arguments)}),addSections:(G=w(regeneratorRuntime.mark((function e(t,r){var a,o,s,i,c,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.body),a=t.body.section_id?t.body.section_id:null,o=!t.body.disabled||t.body.disabled,s=t.body,i=s.section_name,c=s.section_logo,u=s.section_description,e.prev=4,e.next=7,n.a.findOneAndUpdate({_id:p.a.Types.ObjectId(a)},{value:i,url:c,description:u,is_active:o},{upsert:!0});case 7:l=e.sent,r.status(200).send({data:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r.status(400).send({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(e,t){return G.apply(this,arguments)}),addTags:(k=w(regeneratorRuntime.mark((function e(t,r){var a,n,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.body),a=t.body.tag_id?t.body.tag_id:null,n=!t.body.disabled||t.body.disabled,s=t.body.tag_name,e.prev=4,e.next=7,o.a.findOneAndUpdate({_id:p.a.Types.ObjectId(a)},{name:s,is_active:n},{upsert:!0});case 7:i=e.sent,r.status(200).send({data:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r.status(400).send({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),function(e,t){return k.apply(this,arguments)}),toggleContents:(j=w(regeneratorRuntime.mark((function e(t,r){var a,s,i,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t.body),a=t.body,s=a.type,i=a.id,c=a.action,u=null,e.prev=3,"sections"!==s){e.next=10;break}return e.next=7,n.a.findOneAndUpdate({_id:p.a.Types.ObjectId(i)},{is_active:c});case 7:u=e.sent,e.next=14;break;case 10:if("tags"!==s){e.next=14;break}return e.next=13,o.a.findOneAndUpdate({_id:p.a.Types.ObjectId(i)},{is_active:c});case 13:u=e.sent;case 14:r.status(200).send({data:u}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),r.status(400).send({error:e.t0});case 20:case"end":return e.stop()}}),e,null,[[3,17]])}))),function(e,t){return j.apply(this,arguments)})};t.a=P,(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(M.register(q,"s3","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/controllers/posts.controller.js"),M.register(P,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/controllers/posts.controller.js")),(B="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&B(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({url:{type:String},title:{type:String},s3_url:{type:String},slug_id:{type:String},mime_type:{type:String},ext:{type:String},post_uploaded:{type:Boolean,default:u.DEFAULT_FALSE},source:{type:String},crawled_source:{type:Number,default:u.CRAWLED_TYPE.DEFAULT},next_cursor:{type:String},section:{type:o.a.Schema.ObjectId,ref:"sections"},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),d=o.a.model("external_urls",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/external.url.model.js"),i.register(l,"externalUrls","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/external.url.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/external.url.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";(function(e){var a;r(3);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var n,o,s={googleCallback:function(e,t){t.redirect("/")},googleAuthenticate:function(e,t){e.user?t.status(200).send({user:e.user}):t.send({user:null})},googleLogout:function(e,t){e.logout(),t.redirect("/")},authenticate:function(e,t,r){e.user?r():(e.user={gender:1,badgets:1,account_type:1,favourite_sections:[],_id:"5e3c3c250beed20e0a53291c",name:"himanshu131194@gmail.com",email:"himanshu savita",profile_pic:{original:{url:"https://lh3.googleusercontent.com/a-/AAuE7mAEEHwJWAXZA6cPFP1f36ptZjHtU2-hY3rQh4vv1A"}},account_id:"113944163418601847954",created:"2020-02-01T10:24:26.981Z",__v:0},r())}};t.a=s,(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(s,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/controllers/users.controller.js"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({value:{type:String},description:{type:String},url:{type:String},created:{type:Date,default:Date.now},is_active:{type:Boolean,default:u.DEFAULT_TRUE},updated:{type:Date},comment:{type:String}}),d=o.a.model("sections",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/sections.model.js"),i.register(l,"Sections","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/sections.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/sections.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({post_id:{type:o.a.Schema.ObjectId,ref:"posts"},user_id:{type:o.a.Schema.ObjectId,ref:"users"},parent_id:{type:o.a.Schema.ObjectId,ref:"comments"},points:{type:Number,default:u.DEFAULT_COUNT},liked:{type:Boolean,default:u.DEFAULT_FALSE},replies_count:{type:Number,default:u.DEFAULT_COUNT},text:{type:String},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),d=o.a.model("comments",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/comments.model.js"),i.register(l,"Comments","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/comments.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/comments.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({key:{type:String},url:{type:String},slug:{type:String},mime:{type:String},ext:{type:String},created:{type:Date,default:Date.now},is_active:{type:Boolean,default:u.DEFAULT_TRUE},updated:{type:Date},comment:{type:String}}),d=o.a.model("documents",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/documents.model.js"),i.register(l,"Documents","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/documents.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/documents.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("uuid/v4")},function(e,t){e.exports=require("aws-sdk")},function(e,t){e.exports=require("request-promise")},function(e,t){e.exports=require("moment")},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({name:{type:String},created:{type:Date,default:Date.now},is_active:{type:Boolean,default:u.DEFAULT_TRUE},updated:{type:Date},comment:{type:String}}),d=o.a.model("tags",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/tags.model.js"),i.register(l,"Tags","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/tags.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/tags.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({url:{type:String},source:{type:String},crawled_source:{type:Number,default:u.CRAWLED_TYPE.DEFAULT},next_cursor:{type:String},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),d=o.a.model("latest_cursor",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/latest_cursor.model.js"),i.register(l,"latestCursor","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/latest_cursor.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/latest_cursor.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=r(12),i=r.n(s),c=r(1);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u=c.a.DB,l=new o.a.Schema({name:{type:String,trim:!0,required:!0,unique:!0},email:{type:String,trim:!0,required:!0,unique:!0},password_hash:{type:String,trim:!0},password_salt:{type:String,trim:!0},gender:{type:Number,default:u.GENDER.MALE},dob:{type:Date},country:{type:Number},profile_pic:{type:String},description:{type:String},badgets:{type:Number,default:u.BADGETS.NOOBIE},accounts:{facebook:{type:String},google:{type:String}},account_type:{type:Number,default:u.DEFAULT_ACCOUNT_TYPE},account_id:{type:String},favourite_sections:[{type:Number}],created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}});l.virtual("password").set((function(e){this._password=e,this.password_salt=this.makeSalt(),this.password_hash=this.encryptPassword(e)})).get((function(){return this._password})),l.methods={authenticate:function(e){return this.encryptPassword(e)===this.password_hash},encryptPassword:function(e){if(!e)return"";try{return i.a.createHmac("sha1",this.password_salt).update(e).digest("hex")}catch(e){return""}},makeSalt:function(){return Math.round((new Date).valueOf()*Math.random())+""}};var d,p,f=o.a.model("users",l);t.a=f,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/users.model.js"),d.register(l,"UserSchema","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/users.model.js"),d.register(f,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/users.model.js")),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&p(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=(r(12),r(1));(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({user_id:{type:o.a.Schema.ObjectId,ref:"users"},comment_id:{type:o.a.Schema.ObjectId,ref:"comments"},post_id:{type:o.a.Schema.ObjectId,ref:"posts"},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),d=o.a.model("liked_comments",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/liked_comments.model.js"),i.register(l,"likedComments","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/liked_comments.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/liked_comments.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";(function(e){var a,n=r(8),o=r.n(n),s=r(21),i=r.n(s),c=r(3),u=r.n(c),l=r(1),d=r(22),p=r.n(d),f=r(26),m=r(27),v=r(28),g=r(30),b=r(32),y=r.n(b),h=r(33),_=r.n(h);r(45);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var L=o()();L.use(y()()),L.use(p.a.urlencoded({limit:"10mb",extended:!0})),L.use(p.a.json({limit:"10mb",extended:!0}));var x=process.cwd();L.use(_()({maxAge:2592e6,keys:[l.a.COOKIEKEY]})),L.use(u.a.initialize()),L.use(u.a.session()),L.use(o.a.static(i.a.join(x,"public"))),L.use("/dist",o.a.static(i.a.join(x,"dist"))),L.use("/api",Object(m.a)(o.a.Router())),L.use("/api",Object(v.a)(o.a.Router())),L.use("/api",Object(g.a)(o.a.Router())),L.get("*",(function(e,t){t.send(Object(f.a)())}));var w,j,k=L;t.a=k,(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(L,"app","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/express.js"),w.register(x,"CURRENT_WORKING_DIR","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/express.js"),w.register(k,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/express.js")),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&j(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,n,o=function(){return'<!DOCTYPE html>\n        <html>\n        <head>\n        <meta charset="utf-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">\n\n        <meta name="description" content="Premium Quality and Responsive UI for Dashboard.">\n        <meta name="author" content="ThemePixels">\n    \n        <title>Bracket Responsive Bootstrap 4 Admin Template</title>\n    \n        \x3c!-- vendor css --\x3e\n        <link href="/lib/font-awesome/css/font-awesome.css" rel="stylesheet">\n        <link href="/lib/Ionicons/css/ionicons.css" rel="stylesheet">\n        <link href="/lib/perfect-scrollbar/css/perfect-scrollbar.css" rel="stylesheet">\n        <link href="/lib/jquery-switchbutton/jquery.switchButton.css" rel="stylesheet">\n        <link href="/lib/rickshaw/rickshaw.min.css" rel="stylesheet">\n        <link href="/lib/chartist/chartist.css" rel="stylesheet">\n        <link href="/lib/jquery-toggles/toggles-full.css" rel="stylesheet">\n\n        \x3c!-- Bracket CSS --\x3e\n        <link rel="stylesheet" href="/css/bracket.css">\n      </head>\n        <body>\n                <div id="root"></div>\n                <script type="text/javascript" src="/dist/bundle.js"><\/script>\n                \n                \n        <script src="/lib/jquery/jquery.js"><\/script>\n        <script src="/lib/popper.js/popper.js"><\/script>\n        <script src="/lib/bootstrap/bootstrap.js"><\/script>\n        <script src="/lib/perfect-scrollbar/js/perfect-scrollbar.jquery.js"><\/script>\n        <script src="/lib/moment/moment.js"><\/script>\n        <script src="/lib/jquery-ui/jquery-ui.js"><\/script>\n        <script src="/lib/jquery-switchbutton/jquery.switchButton.js"><\/script>\n        <script src="/lib/peity/jquery.peity.js"><\/script>\n        <script src="/lib/highlightjs/highlight.pack.js"><\/script>\n        <script src="/lib/select2/js/select2.min.js"><\/script>\n        <script src="/lib/jquery-toggles/toggles.min.js"><\/script>\n    \n        <script src="/js/bracket.js"><\/script>\n        <script>\n            $(function(){\n            \'use strict\'\n            // Toggles\n            $(\'.toggle\').toggles({\n              on: true,\n              height: 26\n            });\n            $(\'.form-layout .form-control\').on(\'focusin\', function(){\n                $(this).closest(\'.form-group\').addClass(\'form-group-active\');\n            });\n    \n            $(\'.form-layout .form-control\').on(\'focusout\', function(){\n                $(this).closest(\'.form-group\').removeClass(\'form-group-active\');\n            });\n    \n            // Select2\n            $(\'#select2-a, #select2-b\').select2({\n                minimumResultsForSearch: Infinity\n            });\n            $(\'#select2-a\').on(\'select2:opening\', function (e) {\n                $(this).closest(\'.form-group\').addClass(\'form-group-active\');\n            });\n\n            $(\'#select2-a\').on(\'select2:closing\', function (e) {\n                $(this).closest(\'.form-group\').removeClass(\'form-group-active\');\n            });\n    \n            });\n        <\/script>\n        </body> \n    </html>'};t.a=o,(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(o,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/template.js"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&n(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(3),o=r.n(n),s=r(9);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=function(e){return e.get("/auth/google",o.a.authenticate("google",{scope:["profile","email"]})),e.get("/auth/google/callback",o.a.authenticate("google"),s.a.googleCallback),e.get("/logout",s.a.googleLogout),e.get("/authenticate",s.a.googleAuthenticate),e};t.a=u,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(u,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/routes/users.routes.js"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(6);r(9);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,s,i=function(e){return e.get("/list-sections",n.a.listSections),e.get("/list-tags",n.a.listTags),e.get("/list-documents",n.a.listUniversalUploads),e.post("/upload-s3",n.a.uploadImagetoS3),e.post("/add-sections",n.a.addSections),e.post("/add-tags",n.a.addTags),e.post("/toggle-contents",n.a.toggleContents),e};t.a=i,(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(i,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/routes/posts.routes.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(0),o=r.n(n),s=(r(12),r(1));(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var i,c,u=s.a.DB,l=new o.a.Schema({user_id:{type:o.a.Schema.ObjectId,ref:"users"},post_id:{type:o.a.Schema.ObjectId,ref:"posts"},is_active:{type:Boolean,default:u.DEFAULT_TRUE},created:{type:Date,default:Date.now},updated:{type:Date},comment:{type:String}}),d=o.a.model("liked_posts",l);t.a=d,(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(u,"DB","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/liked_posts.model.js"),i.register(l,"likePosts","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/liked_posts.model.js"),i.register(d,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/models/liked_posts.model.js")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,r(2)(e))},function(e,t,r){"use strict";(function(e){var a,n=r(5);(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,s,i=function(e){return e.post("/upload-crawled-urls",n.a.storeAllCrawledUrls),e.get("/list-crawled-pages",n.a.listCrawledPages),e.get("/post-crawled-urls",n.a.uploadPost),e.post("/9gag-crawled-urls",n.a.nineGagCrawledUrls),e.get("/list-crawled-urls",n.a.listUploadedPosts),e.post("/latest-cursor",n.a.latestCursor),e.get("/latest-cursor",n.a.getLatestCursor),e.get("/compressed-images",n.a.compressImages),e};t.a=i,(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&o.register(i,"default","/Users/himanshusavita/Documents/live-projects/friendskit-admin/server/routes/crawlers.routes.js"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)}).call(this,r(2)(e))},function(e,t){e.exports=require("node-fetch")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("cookie-session")},function(e,t){e.exports=require("passport-google-oauth20")},function(e,t,r){r(36),e.exports=r(37)},function(e,t){e.exports=require("babel-polyfill")},function(e,t,r){"use strict";r.r(t);var a=r(1),n=r(0),o=r.n(n),s=r(25);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;o.a.Promise=global.Promise,o.a.connect(a.a.MONGO_URI,{useNewUrlParser:!0}),o.a.connection.on("error",(function(){throw new Error("unable to connect to database")})),s.a.listen(a.a.port,(function(e){e&&console.log(e),console.info("Server started on port %s.",a.a.port)}))},function(e,t){e.exports=require("request")},function(e,t){e.exports=require("imagemin")},function(e,t){e.exports=require("imagemin-jpegtran")},function(e,t){e.exports=require("imagemin-optipng")},function(e,t){e.exports=require("imagemin-mozjpeg")},function(e,t){e.exports=require("imagemin-webp")},function(e,t){e.exports=require("imagemin-giflossy")},function(e,t,r){"use strict";var a=r(3),n=r.n(a),o=r(34),s=r(20),i=r(1);function c(e,t,r,a,n,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(a,n)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function s(e){c(o,a,n,s,i,"next",e)}function i(e){c(o,a,n,s,i,"throw",e)}s(void 0)}))}}"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;n.a.serializeUser((function(e,t){console.log(e.id),t(null,e.id)})),n.a.deserializeUser(function(){var e=u(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.findOne({_id:t});case 2:a=e.sent,r(null,a);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),n.a.use(new o.Strategy({clientID:i.a.LOGIN_KEYS.GOOGLE.CLIENT,clientSecret:i.a.LOGIN_KEYS.GOOGLE.SECRET,callbackURL:"/api/auth/google/callback"},function(){var e=u(regeneratorRuntime.mark((function e(t,r,a,n){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,s.a.findOne({account_id:a.id});case 3:if(o=e.sent,console.log("existing user"),console.log(o),!o){e.next=8;break}return e.abrupt("return",n(null,o));case 8:return e.next=10,new s.a({name:a.emails[0].value,email:a.displayName,account_type:1,account_id:a.id,profile_pic:a.photos[0].value}).save();case 10:i=e.sent,n(null,i);case 12:case"end":return e.stop()}}),e)})));return function(t,r,a,n){return e.apply(this,arguments)}}()))}]);